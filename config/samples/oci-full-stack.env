# ============================================================================
# OCI FULL STACK (All OCI Services)
# ============================================================================
# Perfect for: Enterprise deployment on Oracle Cloud
# Setup time: 3-4 hours
# Monthly cost: $200-400
# Handles: 50,000-500,000 users
# Architecture: Full OCI stack with managed services
#
# Infrastructure:
#   - OCI Autonomous Database (managed PostgreSQL-compatible)
#   - OCI Load Balancer (flexible with SSL)
#   - OCI Compute (auto-scaling instance pools)
#   - OCI Cache (managed Redis)
#   - OCI Queue (managed message queue)
#   - OCI Vault (secrets management)
#   - OCI Object Storage (static assets)
#
# Setup Steps:
#   1. Create OCI Autonomous Database
#   2. Create OCI Vault and add secrets
#   3. Setup OCI Cache (Redis)
#   4. Create OCI Queue
#   5. Deploy using Terraform or OCI Console
#
# Guide: DEPLOYMENT_QUICKSTART.md#scenario-3-oci-multi-tier
# ============================================================================

# Deployment Configuration
DEPLOYMENT_MODE=multi-tier
NODE_ENV=production
CLOUD_PROVIDER=oci

# Database - OCI Autonomous Database
DATABASE_TYPE=oci-autonomous
OCI_DB_CONNECTION_STRING=<REPLACE_WITH_CONNECTION_STRING>
OCI_DB_USER=admin
OCI_DB_PASSWORD=<STORED_IN_VAULT>
OCI_DB_WALLET_PATH=/opt/oracle/wallet
DATABASE_POOL_MIN=10
DATABASE_POOL_MAX=50

# Authentication - Local JWT (Autonomous DB doesn't have built-in auth)
AUTH_PROVIDER=local
JWT_SECRET=<STORED_IN_VAULT>
JWT_EXPIRY=1h
JWT_REFRESH_EXPIRY=7d

# Workers - OCI Queue (Serverless)
WORKER_MODE=oci-queue
OCI_QUEUE_ENDPOINT=<REPLACE_WITH_QUEUE_ENDPOINT>
OCI_QUEUE_OCID=<REPLACE_WITH_QUEUE_OCID>
WORKER_CONCURRENCY=20

# Cache - OCI Cache (Managed Redis)
CACHE_TYPE=oci-cache
OCI_CACHE_ENDPOINT=<REPLACE_WITH_CACHE_ENDPOINT>
CACHE_TTL=600
CACHE_PREFIX=bharatmart

# Secrets Management - OCI Vault
SECRETS_PROVIDER=oci-vault
OCI_VAULT_OCID=<REPLACE_WITH_VAULT_OCID>
OCI_CONFIG_FILE=/home/opc/.oci/config
OCI_PROFILE=DEFAULT

# OCI Configuration
OCI_TENANCY_OCID=<REPLACE_THIS>
OCI_USER_OCID=<REPLACE_THIS>
OCI_FINGERPRINT=<REPLACE_THIS>
OCI_REGION=ap-mumbai-1

# Object Storage for static assets
OCI_OBJECT_STORAGE_NAMESPACE=<REPLACE_THIS>
OCI_OBJECT_STORAGE_BUCKET=bharatmart-assets

# Server Configuration
PORT=3000
HOST=0.0.0.0
FRONTEND_URL=https://yourdomain.com

# Security
CORS_ORIGIN=https://yourdomain.com
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Logging - OCI Logging Service
LOG_LEVEL=info
LOG_FORMAT=json
OCI_LOG_GROUP_OCID=<REPLACE_THIS>
OCI_LOG_OCID=<REPLACE_THIS>

# Metrics - OCI Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
OCI_METRICS_NAMESPACE=bharatmart

# Health Checks
HEALTH_CHECK_PATH=/api/health
READINESS_CHECK_PATH=/api/health/ready

# Load Balancer Configuration
LB_COOKIE_NAME=bharatmart-lb
LB_SESSION_PERSISTENCE=true

# Frontend Configuration
VITE_API_URL=https://api.yourdomain.com
VITE_APP_NAME=BharatMart
VITE_CDN_URL=https://objectstorage.ap-mumbai-1.oraclecloud.com
# Note: No VITE_SUPABASE_* needed (using OCI Autonomous DB, local auth)
# If using Supabase Auth separately, add: VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY

# Email - OCI Email Delivery
EMAIL_PROVIDER=oci
OCI_EMAIL_APPROVED_SENDER=noreply@yourdomain.com

# Monitoring
SENTRY_DSN=<REPLACE_WITH_SENTRY_DSN>

# Auto-Scaling Configuration
ENABLE_AUTO_SCALING=true
MIN_INSTANCES=2
MAX_INSTANCES=20
SCALE_UP_CPU_THRESHOLD=70
SCALE_DOWN_CPU_THRESHOLD=30
SCALE_UP_QUEUE_THRESHOLD=100
COOLDOWN_PERIOD=300
